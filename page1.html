<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Мой питомец - Забота о вашем любимце</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="block">
            <div class="header-content">
                <div class="logo">
                    <img src="img/img3.png" alt="Логотип Мой питомец">
                    <h1>Мой питомец</h1>
                </div>
                <nav class="nav">
                    <a href="#important">Главная</a>
                    <a href="#opportunity">Возможности</a>
                    <a href="registration.html" class="btn-login">Авторизоваться</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <section id="important" class="important">
            <div class="block">
                <div class="important-content">
                    <h2>Забота о вашем питомце — наша главная задача</h2>
                    <p>Никогда не забывайте о лекарствах, визитах к ветеринару и кормлении вашего любимца</p>
                    <a href="#" class="btn-primary">Начать заботиться</a>
                </div>
                <div class="image">
                    <img src="img/img2.png" alt="Счастливый питомец">
                </div>
            </div>
        </section>

        <section id="opportunity" class="opportunity">
            <div class="block">
                <h2 class="section-title">Наши возможности</h2>
                <div class="opportunity-cards">
                    <div class="card">
                        <h3>Напоминания о лекарствах</h3>
                        <p>Устанавливайте напоминания о приеме лекарств и получайте уведомления</p>
                    </div>
                    <div class="card">
                        <h3>Ветеринарные визиты</h3>
                        <p>Отслеживайте историю посещений и планируйте следующие визиты</p>
                    </div>
                    <div class="card">
                        <h3>Кормление</h3>
                        <p>Настройте расписание кормления и следите за рационом питомца</p>
                    </div>
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3>Медицинская история</h3>
                        <p>Вся медицинская информация вашего питомца в одном месте</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="block">
            <div class="footer-content">
                <div class="info">
                    <h3>Мой питомец</h3>
                    <p>Помогаем заботиться о ваших любимцах с 2025 года</p>
                </div>
                <div class="links">
                    <h4>Навигация</h4>
                    <a href="#opportunity">Возможности</a>
                    <a href="#history">История</a>
                    <a href="#profile">Авторизоваться</a>
                </div>
                <div class="support">
                    <h4>Поддержка</h4>
                    <a href="#">support@mypet.com</a>
                    <a href="tel:+78001234567">+7 (916) 000-00-00</a>
                </div>
                <div class="social">
                    <h4>Мы в соцсетях</h4>
                    <div class="social-icons">
                        <a href="#">Telegram</a>
                        <a href="#">ВКонтакте</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // Проверка авторизации
        function checkAuth() {
            const user = localStorage.getItem('currentUser');
            return user ? JSON.parse(user) : null;
        }

        // Выход из системы
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }

        // Загрузка задач из localStorage
        function loadTasks() {
            const tasks = localStorage.getItem('userTasks');
            return tasks ? JSON.parse(tasks) : [];
        }

        // Сохранение задач в localStorage
        function saveTasks(tasks) {
            localStorage.setItem('userTasks', JSON.stringify(tasks));
        }

        // Обновление счетчика задач
        function updateTaskCount() {
            const tasks = loadTasks();
            document.getElementById('taskCount').textContent = tasks.length;
        }

        // Отображение задач
        function renderTasks() {
            const tasks = loadTasks();
            const taskList = document.getElementById('taskList');
            
            taskList.innerHTML = '';
            
            tasks.forEach((task, index) => {
                const taskItem = document.createElement('li');
                taskItem.className = `task-item ${task.completed ? 'completed' : ''}`;
                taskItem.innerHTML = `
                    <span>${task.text}</span>
                    <div class="task-actions">
                        ${!task.completed ? `<button onclick="toggleTask(${index})" title="Отметить выполненным"><i class="fas fa-check"></i></button>` : ''}
                        <button onclick="deleteTask(${index})" title="Удалить"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                taskList.appendChild(taskItem);
            });
            
            updateTaskCount();
        }

        // Добавление задачи
        function addTask(text) {
            const tasks = loadTasks();
            
            if (tasks.length >= 10) {
                alert('Максимальное количество задач - 10. Удалите некоторые задачи перед добавлением новых.');
                return;
            }
            
            tasks.push({
                text: text,
                completed: false
            });
            
            saveTasks(tasks);
            renderTasks();
            document.getElementById('newTaskInput').value = '';
        }

        // Переключение статуса задачи
        function toggleTask(index) {
            const tasks = loadTasks();
            tasks[index].completed = !tasks[index].completed;
            saveTasks(tasks);
            renderTasks();
        }

        // Удаление задачи
        function deleteTask(index) {
            const tasks = loadTasks();
            tasks.splice(index, 1);
            saveTasks(tasks);
            renderTasks();
        }

        // Инициализация страницы при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = checkAuth();
            
            if (!currentUser) {
                // Пользователь не авторизован
                document.getElementById('unauthorizedMessage').style.display = 'block';
                document.getElementById('authorizedContent').style.display = 'none';
            } else {
                // Пользователь авторизован
                document.getElementById('unauthorizedMessage').style.display = 'none';
                document.getElementById('authorizedContent').style.display = 'block';
                
                // Заполняем информацию о пользователе
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                
                const roleName = getRoleName(currentUser.role);
                const roleBadgeClass = getRoleBadgeClass(currentUser.role);
                
                const roleBadge = document.getElementById('userRoleBadge');
                roleBadge.textContent = roleName;
                roleBadge.className = `role-badge ${roleBadgeClass}`;
                
                // Инициализация интерактивных элементов
                
                // 1. Счетчик
                let counter = parseInt(localStorage.getItem('userCounter')) || 0;
                const counterDisplay = document.getElementById('counterValue');
                const counterMessage = document.getElementById('counterMessage');
                
                counterDisplay.textContent = counter;
                
                document.getElementById('increaseBtn').addEventListener('click', function() {
                    counter++;
                    counterDisplay.textContent = counter;
                    localStorage.setItem('userCounter', counter.toString());
                    
                    if (counter === 100) {
                        counterMessage.textContent = 'Поздравляем! Вы достигли 100!';
                        counterMessage.style.color = '#4CAF50';
                    } else if (counter > 100) {
                        counterMessage.textContent = 'Вы превысили 100! Отличный результат!';
                        counterMessage.style.color = '#FF9800';
                    } else {
                        counterMessage.textContent = 'Счетчик обновлен. Продолжайте!';
                        counterMessage.style.color = '#2a5298';
                    }
                });
                
                document.getElementById('decreaseBtn').addEventListener('click', function() {
                    counter--;
                    counterDisplay.textContent = counter;
                    localStorage.setItem('userCounter', counter.toString());
                    counterMessage.textContent = 'Счетчик обновлен. Продолжайте!';
                    counterMessage.style.color = '#2a5298';
                });
                
                document.getElementById('resetBtn').addEventListener('click', function() {
                    counter = 0;
                    counterDisplay.textContent = counter;
                    localStorage.setItem('userCounter', counter.toString());
                    counterMessage.textContent = 'Счетчик сброшен. Начните заново!';
                    counterMessage.style.color = '#2a5298';
                });
                
                // 2. Смена цвета
                const colorOptions = document.querySelectorAll('.color-option');
                const currentColorName = document.getElementById('currentColorName');
                
                colorOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const color = this.getAttribute('data-color');
                        const card = this.closest('.dashboard-card');
                        card.style.backgroundColor = color;
                        
                        // Сохраняем выбранный цвет в localStorage
                        localStorage.setItem('userCardColor', color);
                        
                        // Обновляем название цвета
                        const colorNames = {
                            '#f8f9ff': 'Стандартный',
                            '#e8f5e9': 'Зеленый',
                            '#fff3e0': 'Оранжевый',
                            '#f3e5f5': 'Фиолетовый',
                            '#e3f2fd': 'Синий',
                            '#ffebee': 'Красный'
                        };
                        
                        currentColorName.textContent = colorNames[color] || 'Пользовательский';
                    });
                });
                
                // Восстановление сохраненного цвета
                const savedColor = localStorage.getItem('userCardColor');
                if (savedColor) {
                    const colorCard = document.querySelector('.dashboard-card:nth-child(2)');
                    if (colorCard) {
                        colorCard.style.backgroundColor = savedColor;
                        
                        const colorNames = {
                            '#f8f9ff': 'Стандартный',
                            '#e8f5e9': 'Зеленый',
                            '#fff3e0': 'Оранжевый',
                            '#f3e5f5': 'Фиолетовый',
                            '#e3f2fd': 'Синий',
                            '#ffebee': 'Красный'
                        };
                        
                        currentColorName.textContent = colorNames[savedColor] || 'Пользовательский';
                    }
                }
                
                // 3. Управление задачами
                renderTasks();
                
                document.getElementById('addTaskBtn').addEventListener('click', function() {
                    const input = document.getElementById('newTaskInput');
                    const text = input.value.trim();
                    
                    if (text) {
                        addTask(text);
                    }
                });
                
                document.getElementById('newTaskInput').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const text = this.value.trim();
                        
                        if (text) {
                            addTask(text);
                        }
                    }
                });
                
                // Инициализация начальных задач, если их нет
                const tasks = loadTasks();
                if (tasks.length === 0) {
                    const initialTasks = [
                        { text: 'Подготовить проект по математике', completed: false },
                        { text: 'Прочитать главу учебника по физике', completed: true },
                        { text: 'Выполнить домашнее задание по информатике', completed: false }
                    ];
                    
                    saveTasks(initialTasks);
                    renderTasks();
                }
            }
            
            // Обработчик кнопки выхода
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
        });
    </script>
</body>
</html>
