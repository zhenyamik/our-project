<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Мой питомец - Забота о вашем любимце</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="block">
            <div class="header-content">
                <div class="logo">
                    <img src="img/img3.png" alt="Логотип Мой питомец">
                    <h1>Мой питомец</h1>
                </div>
                <nav class="nav">
                    <a href="#important">Главная</a>
                    <a href="#opportunity">Возможности</a>
                    <a href="auth.html" class="btn-login" id="loginLink">Авторизоваться</a>
                <div id="userInfo" class="login-info" style="display: none;">
                    <a href="profile.html" class="btn-login"><span id="userNameDisplay"></span></a>
                    <a class="logout-btn" id="logoutBtnMain">Выйти</a>
                </div>
                </nav>
            </div>
        </div>
    </header>

    <main class="main">
        <section id="important" class="important">
            <div class="block">
                <div class="important-content">
                    <h2>Забота о вашем питомце — наша главная задача</h2>
                    <p>Никогда не забывайте о лекарствах, визитах к ветеринару и кормлении вашего любимца</p>
                    <a href="auth.html" class="btn-primary" id="startAuth">Начать заботиться</a>
                </div>
                <div class="image">
                    <img src="img/img2.png" alt="Счастливый питомец">
                </div>
            </div>
        </section>

        <section id="opportunity" class="opportunity">
            <div class="block">
                <h2 class="section-title">Наши возможности</h2>
                <div class="opportunity-cards">
                    <div class="card">
                        <h3>Напоминания о лекарствах</h3>
                        <p>Устанавливайте напоминания о приеме лекарств и получайте уведомления</p>
                    </div>
                    <div class="card">
                        <h3>Ветеринарные визиты</h3>
                        <p>Отслеживайте историю посещений и планируйте следующие визиты</p>
                    </div>
                    <div class="card">
                        <h3>Кормление</h3>
                        <p>Настройте расписание кормления и следите за рационом питомца</p>
                    </div>
                    <div class="card">
                        <div class="feature-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <h3>Медицинская история</h3>
                        <p>Вся медицинская информация вашего питомца в одном месте</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="auth-promo" id="authSection">
            <h3 class="section-title">Присоединяйтесь к нашему сообществу!</h3>
            <p>Зарегистрируйтесь на нашем сайте, чтобы получить доступ к персональным материалам, электронному дневнику, расписанию занятий и интерактивным возможностям. Уже более 1000 учеников и родителей используют наш онлайн-сервис!</p>
            <a href="auth.html" class="btn-primary" id="authButton">Зарегистрироваться сейчас</a>
            <p style="margin-top: 20px; font-size: 0.9rem;">Уже зарегистрированы? <a href="login.html" style="color: #4CAF50; text-decoration: underline;">Войдите в свой аккаунт</a></p>
        </div>
    </main>

    <footer class="footer">
        <div class="block">
            <div class="footer-content">
                <div class="info">
                    <h3>Мой питомец</h3>
                    <p>Помогаем заботиться о ваших любимцах с 2025 года</p>
                </div>
                <div class="links">
                    <h4>Навигация</h4>
                    <a href="#opportunity">Возможности</a>
                    <a href="#history">История</a>
                    <a href="#profile">Авторизоваться</a>
                </div>
                <div class="support">
                    <h4>Поддержка</h4>
                    <a href="#">support@mypet.com</a>
                    <a href="tel:+78001234567">+7 (916) 000-00-00</a>
                </div>
                <div class="social">
                    <h4>Мы в соцсетях</h4>
                    <div class="social-icons">
                        <a href="#">Telegram</a>
                        <a href="#">ВКонтакте</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        // Проверка авторизации
        function checkAuth() {
            const user = localStorage.getItem('currentUser');
            return user ? JSON.parse(user) : null;
        }

        // Выход из системы
        function logout() {
            localStorage.removeItem('currentUser');
            updateAuthUI();
            showMessage('Вы успешно вышли из системы', 'success');
        }

        // Показать сообщение
        function showMessage(text, type) {
            // Создаем элемент для сообщения
            const messageDiv = document.createElement('div');
            messageDiv.textContent = text;
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
            `;
            
            if (type === 'success') {
                messageDiv.style.backgroundColor = '#4CAF50';
            } else if (type === 'error') {
                messageDiv.style.backgroundColor = '#f44336';
            } else {
                messageDiv.style.backgroundColor = '#2a5298';
            }
            
            document.body.appendChild(messageDiv);
            
            // Удаляем сообщение через 3 секунды
            setTimeout(() => {
                messageDiv.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(messageDiv);
                }, 300);
            }, 3000);
            
            // Добавляем стили для анимации
            if (!document.querySelector('#messageStyles')) {
                const style = document.createElement('style');
                style.id = 'messageStyles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // Обновление интерфейса в зависимости от статуса авторизации
        function updateAuthUI() {
            const currentUser = checkAuth();
            const loginLink = document.getElementById('loginLink');
            const userInfo = document.getElementById('userInfo');
            const authSection = document.getElementById('authSection');
            const authButton = document.getElementById('authButton');
            const startAuth = document.getElementById('startAuth');
            
            if (currentUser) {
                // Пользователь авторизован
                loginLink.style.display = 'none';
                startAuth.style.display = 'none';
                userInfo.style.display = 'flex';
                
                document.getElementById('userNameDisplay').textContent = currentUser.name;
                
                // Обновляем блок призыва к действию
                authSection.innerHTML = `
                    <h3 class="section-title">Добро пожаловать, ${currentUser.name}!</h3>
                    <p>Перейдите в личный кабинет для доступа ко всем возможностям нашего сайта. У вас есть доступ к данным вашего питомца, истории визитов и списку пинимаемых лекаств.</p>
                    <a href="profile.html" class="btn-primary">Перейти в личный кабинет</a>
                    <p style="margin-top: 20px; font-size: 0.9rem;">Не ваш аккаунт? <a href="#" id="logoutLink" style="color: #4CAF50; text-decoration: underline;">Выйти из системы</a></p>
                `;
                
                // Добавляем обработчик для кнопки выхода в блоке призыва
                document.getElementById('logoutLink').addEventListener('click', function(e) {
                    e.preventDefault();
                    logout();
                });
            } else {
                // Пользователь не авторизован
                loginLink.style.display = 'flex';
                userInfo.style.display = 'none';
                
                // Восстанавливаем стандартный блок призыва к действию
                authSection.innerHTML = `
                    <h3 class="section-title">Присоединяйтесь к нашему сообществу!</h3>
                    <p>Зарегистрируйтесь на нашем сайте, чтобы получить доступ к данным вашего питомца, истории визитов и списку пинимаемых лекаств. Уже более 1000 учеников и родителей используют наш онлайн-сервис!</p>
                    <a href="auth.html" class="btn-primary" id="authButton">Зарегистрироваться сейчас</a>
                    <p style="margin-top: 20px; font-size: 0.9rem;">Уже зарегистрированы? <a href="auth.html" style="color: #4CAF50; text-decoration: underline;">Войдите в свой аккаунт</a></p>
                `;
            }
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthUI();
            
            // Обработчик кнопки выхода в шапке
            document.getElementById('logoutBtnMain').addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
            
            // Плавная прокрутка для якорных ссылок
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    if (this.getAttribute('href') !== '#') {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Инициализация базы данных пользователей, если её нет
            if (!localStorage.getItem('users')) {
                const initialUsers = [
                    { id: 1, name: "Иванов Иван", email: "ivan@test.ru", password: "123456", role: "student" },
                    { id: 2, name: "Петрова Мария", email: "maria@test.ru", password: "123456", role: "parent" },
                    { id: 3, name: "Сидоров Алексей", email: "alex@test.ru", password: "123456", role: "teacher" }
                ];
                localStorage.setItem('users', JSON.stringify(initialUsers));
                localStorage.setItem('nextUserId', '4');
            }
            
            // Проверяем, был ли пользователь перенаправлен с других страниц
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('registered') && urlParams.get('registered') === 'true') {
                showMessage('Регистрация прошла успешно! Добро пожаловать!', 'success');
            }
            
            if (urlParams.has('loggedout') && urlParams.get('loggedout') === 'true') {
                showMessage('Вы успешно вышли из системы', 'success');
            }
        });
    </script>
</body>
</html>